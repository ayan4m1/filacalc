"use strict";(self.webpackChunkfilacalc=self.webpackChunkfilacalc||[]).push([[234],{80579:function(e,n,r){r.r(n),r.d(n,{default:function(){return g}});var t=r(67294),a=r(10682),s=r(34051),i=r(31555),l=r(36968),o=r(51479),c=r(23314),u=r(64593),d=r(2135),m=r(49306),f=r(50882),h=r(98152),p=()=>{const e=e=>{for(const[,,,n,r]of[...e.trim().matchAll(/(\s*(([XYZFEIJR])([0-9\-.]+))\s*)/g)])if("E"===n)return parseFloat(r);return 0};self.addEventListener("message",(({data:n})=>{const r=new FileReader;let t=0,a=0;r.addEventListener("load",(n=>{const r=n.target.result.split(/[\n]/g).filter((e=>/^G[1-3]/.test(e)));for(const[n,s]of r.entries()){t+=e(s);const i=Math.round(n/r.length*100);i!==a&&(postMessage({type:"progress",progress:i}),a=i)}t>0&&postMessage({type:"result",length:t/1e3})})),r.addEventListener("error",(()=>{postMessage({type:"error"})})),r.readAsText(n)}))},b=r(48903);var x=r(85893);function g(){var e=(0,f.Z)({initialValues:{material:"",diameter:1.75,length:0,price:0,customMaterialDensity:0},shouldShow:(0,t.useCallback)((function(e,n){return n.material||e.material||n.length}),[]),validate:(0,t.useCallback)((function(e){var n=[];return e.material||n.push("Select a material."),e.length<=0&&n.push("Extrusion length must be greater than zero."),e.diameter<=0&&n.push("Filament diameter must be greater than zero."),n}),[]),calculate:(0,t.useCallback)((function(e){var n=Math.PI*Math.pow(e.diameter/2,2)*(1e3*e.length)/1e3,r=n*("custom"!==e.material?(0,b.Ut)(e.material).density:e.customMaterialDensity),t=0;return e.price>0&&(t=r/1e3*e.price),[{label:"Volume",content:(0,x.jsxs)("span",{children:[n.toFixed(2)," cm",(0,x.jsx)("sup",{children:"3"})]})},{label:"Mass",content:(0,x.jsxs)("span",{children:[r.toFixed(2)," g"]})},{label:"Cost",content:(0,x.jsx)("span",{children:t.toFixed(2)})},{label:"Prints per kg",content:(0,x.jsx)("span",{children:Math.floor(1e3/r)})}]}),[])}),n=e.formik,r=n.values,g=n.handleChange,y=n.handleBlur,v=n.setFieldValue,j=e.results,Z=e.errors,C=function(e){var n=(0,t.useMemo)((function(){return(0,b.j1)(p)}),[]),r=(0,t.useState)(!1),a=(0,h.Z)(r,2),s=a[0],i=a[1],l=(0,t.useState)(!1),o=(0,h.Z)(l,2),c=o[0],u=o[1],d=(0,t.useState)(0),m=(0,h.Z)(d,2),f=m[0],x=m[1],g=(0,t.useCallback)((function(n){var r=n.data;switch(r.type){case"progress":x(r.progress);break;case"result":e(r),u(!1),x(100);break;case"error":i(!0),u(!1)}}),[e,x,u,i]),y=(0,t.useCallback)((function(e){if(!e||!e.name.endsWith(".gcode"))return i(!0),void u(!1);i(!1),u(!0),x(0),n.postMessage(e)}),[n]);return(0,t.useEffect)((function(){return n.addEventListener("message",g),function(){return n.removeEventListener("message",g)}})),{loading:c,error:s,progress:f,parse:y}}((function(e){return v("length",e.length.toFixed(2))})),w=C.loading,P=C.error,S=C.progress,N=C.parse,k=(0,t.useCallback)((function(e){return N(e.target.files[0])}),[N]);return w?(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(u.q,{title:"Filament Usage"}),(0,x.jsx)("h1",{children:"Filament Usage"}),(0,x.jsxs)(a.Z,{children:[(0,x.jsx)(s.Z,{children:(0,x.jsx)(i.Z,{className:"text-center",children:(0,x.jsx)("h4",{children:"Parsing your G-code..."})})}),(0,x.jsx)(s.Z,{children:(0,x.jsxs)(i.Z,{className:"text-center",children:[(0,x.jsx)(l.Z,{animation:"border",className:"my-3"}),(0,x.jsx)(o.Z,{animated:!0,now:S,variant:"primary"})]})})]})]}):(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(u.q,{title:"Filament Usage"}),(0,x.jsx)("h1",{children:"Filament Usage"}),(0,x.jsx)("p",{children:"Use this calculator to determine how much filament a given print will consume. You can either enter the filament length manually or parse a G-code file to derive this information."}),(0,x.jsxs)(c.Z,{children:[(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Select a G-code file"}),(0,x.jsx)(c.Z.Control,{isInvalid:P,onChange:k,type:"file"}),(0,x.jsx)(c.Z.Text,{className:"text-muted",children:"Files are parsed in your browser, not sent to a server."}),(0,x.jsx)(c.Z.Control.Feedback,{type:"invalid",children:"Unable to parse the selected file."})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Material"}),(0,x.jsxs)(c.Z.Select,{name:"material",onBlur:y,onChange:g,value:r.material,children:[(0,x.jsx)("option",{value:"",children:"Select One"}),b.NC.map((function(e){return(0,x.jsx)("option",{value:e.name,children:e.name},e.name)})),(0,x.jsx)("option",{value:"custom",children:"Custom"})]})]}),"custom"===r.material&&(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsxs)(c.Z.Label,{children:["Custom Material Density (g/cm",(0,x.jsx)("sup",{children:"3"}),")"]}),(0,x.jsx)(c.Z.Control,{min:"0",name:"customMaterialDensity",onChange:g,type:"number",value:r.customMaterialDensity})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Diameter (mm)"}),(0,x.jsx)(c.Z.Control,{min:"0",name:"diameter",onChange:g,value:r.diameter})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Length (m)"}),(0,x.jsx)(c.Z.Control,{min:"0",name:"length",onBlur:y,onChange:g,value:r.length})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Price (cost/kg)"}),(0,x.jsx)(c.Z.Control,{min:"0",name:"price",onChange:g,value:r.price})]})]}),(0,x.jsx)(d.Z,{errors:Z}),Boolean(j)&&(0,x.jsx)(m.Z,{results:j})]})}},2135:function(e,n,r){r.d(n,{Z:function(){return C}});var t=r(45697),a=r.n(t),s=r(94184),i=r.n(s),l=r(67294),o=r(14289),c=r(78146),u=r(23735),d=r(76792),m=r(41068),f=r(41485),h=r(39602),p=r(44680),b=r(85893);const x=(0,h.Z)("h4");x.displayName="DivStyledAsH4";const g=(0,p.Z)("alert-heading",{Component:x}),y=(0,p.Z)("alert-link",{Component:u.Z}),v={variant:"primary",show:!0,transition:m.Z,closeLabel:"Close alert"},j=l.forwardRef(((e,n)=>{const{bsPrefix:r,show:t,closeLabel:a,closeVariant:s,className:l,children:u,variant:h,onClose:p,dismissible:x,transition:g,...y}=(0,o.Ch)(e,{show:"onClose"}),v=(0,d.vE)(r,"alert"),j=(0,c.Z)((e=>{p&&p(!1,e)})),Z=!0===g?m.Z:g,C=(0,b.jsxs)("div",{role:"alert",...Z?void 0:y,ref:n,className:i()(l,v,h&&`${v}-${h}`,x&&`${v}-dismissible`),children:[x&&(0,b.jsx)(f.Z,{onClick:j,"aria-label":a,variant:s}),u]});return Z?(0,b.jsx)(Z,{unmountOnExit:!0,...y,ref:void 0,in:t,children:C}):t?C:null}));j.displayName="Alert",j.defaultProps=v;var Z=Object.assign(j,{Link:y,Heading:g});function C(e){var n=e.errors;return null!=n&&n.length?(0,b.jsx)(Z,{className:"my-4",variant:"warning",children:(0,b.jsx)("ul",{className:"mb-0",children:n.map((function(e){return(0,b.jsx)("li",{children:e},e)}))})}):null}C.propTypes={errors:a().arrayOf(a().string)}},49306:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(45697),a=r.n(t),s=r(86025),i=r(34051),l=r(31555),o=r(85893);function c(e){var n=e.children,r=e.results,t=e.title,a=void 0===t?"Results":t;return(0,o.jsxs)(s.Z,{body:!0,className:"my-4",children:[(0,o.jsx)(s.Z.Title,{children:a}),(null==r?void 0:r.length)>0&&r.map((function(e,t){return(0,o.jsxs)(i.Z,{className:Boolean(n)&&t===r.length-1?"mb-4":null,children:[(0,o.jsx)(l.Z,{xs:2,children:(0,o.jsx)("strong",{children:e.label})}),(0,o.jsx)(l.Z,{xs:10,children:e.content})]},e.label)})),n]})}c.propTypes={children:a().node,results:a().arrayOf(a().shape({label:a().string.isRequired,content:a().oneOfType([a().node,a().string]).isRequired})),title:a().string}},50882:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(98152),a=r(94649),s=r(67294);function i(e){var n=e.initialValues,r=e.calculate,i=e.shouldShow,l=e.validate,o=(0,s.useState)(null),c=(0,t.Z)(o,2),u=c[0],d=c[1],m=(0,s.useState)([]),f=(0,t.Z)(m,2),h=f[0],p=f[1],b=(0,a.TA)({initialValues:n}),x=b.values,g=b.touched;return(0,s.useEffect)((function(){if(!i(x,g))return p([]),void d(null);var e=l(x);e.length>0?(p(e),d(null)):(p([]),d(r(x)))}),[x,g,i,l,r,d]),{formik:b,results:u,errors:h}}},48903:function(e,n,r){r.d(n,{AF:function(){return u},Kl:function(){return f},NC:function(){return l},OK:function(){return c},Q:function(){return m},Ut:function(){return o},ZM:function(){return s},bA:function(){return d},j1:function(){return a},lO:function(){return h},w5:function(){return i}});var t=r(71002),a=function(e){if("object"===("undefined"==typeof window?"undefined":(0,t.Z)(window))){var n=e.toString(),r=new Blob(["(".concat(n,")()")]);return new Worker(URL.createObjectURL(r))}},s=[{brand:"3D Solutech",mass:173},{brand:"Amazon Basics",mass:248},{brand:"Amolen",mass:190},{brand:"Atomic Filament",mass:306},{brand:"Colorfabb",mass:236},{brand:"eSun",mass:224},{brand:"Inland",mass:225},{brand:"Hatchbox",mass:225},{brand:"Overture",mass:237},{brand:"PolyMaker",mass:220},{brand:"Prusament",mass:201},{brand:"ProtoPasta",mass:70},{brand:"StrongHero3D",mass:151},{brand:"SunLu",mass:133},{brand:"ZYLtech",mass:179}],i=function(e){return s.find((function(n){return n.brand===e}))},l=[{name:"PLA",density:1.24},{name:"ABS",density:1.04},{name:"PETG",density:1.27},{name:"Nylon",density:1.52},{name:"TPU",density:1.21},{name:"PC",density:1.3},{name:"CF",density:1.3},{name:"HIPS",density:1.03},{name:"PVA",density:1.23},{name:"ASA",density:1.05},{name:"PP",density:.9},{name:"POM",density:1.4},{name:"PMMA",density:1.18}],o=function(e){return l.find((function(n){return n.name===e}))},c=[{name:"Mk8",diameter:2.4,length:13},{name:"Mk10",diameter:4,length:13},{name:"Volcano 1.75mm",diameter:2,length:21},{name:"Volcano 3mm",diameter:3.2,length:21}],u=function(e){return c.find((function(n){return n.name===e}))},d=[{name:"Ender 3",meltZoneDiameter:2,meltZoneLength:25},{name:"Volcano",meltZoneDiameter:6,meltZoneLength:19}],m=function(e){return d.find((function(n){return n.name===e}))},f=[1.8,.9,7.5],h=[1.25,1,12,16,25,1.41111,1.27,1.5875]},86025:function(e,n,r){r.d(n,{Z:function(){return P}});var t=r(94184),a=r.n(t),s=r(67294),i=r(76792),l=r(44680),o=r(39602),c=r(85893);const u=s.forwardRef((({bsPrefix:e,className:n,variant:r,as:t="img",...s},l)=>{const o=(0,i.vE)(e,"card-img");return(0,c.jsx)(t,{ref:l,className:a()(r?`${o}-${r}`:o,n),...s})}));u.displayName="CardImg";var d=u,m=r(49059);const f=s.forwardRef((({bsPrefix:e,className:n,as:r="div",...t},l)=>{const o=(0,i.vE)(e,"card-header"),u=(0,s.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,c.jsx)(m.Z.Provider,{value:u,children:(0,c.jsx)(r,{ref:l,...t,className:a()(n,o)})})}));f.displayName="CardHeader";var h=f;const p=(0,o.Z)("h5"),b=(0,o.Z)("h6"),x=(0,l.Z)("card-body"),g=(0,l.Z)("card-title",{Component:p}),y=(0,l.Z)("card-subtitle",{Component:b}),v=(0,l.Z)("card-link",{Component:"a"}),j=(0,l.Z)("card-text",{Component:"p"}),Z=(0,l.Z)("card-footer"),C=(0,l.Z)("card-img-overlay"),w=s.forwardRef((({bsPrefix:e,className:n,bg:r,text:t,border:s,body:l,children:o,as:u="div",...d},m)=>{const f=(0,i.vE)(e,"card");return(0,c.jsx)(u,{ref:m,...d,className:a()(n,f,r&&`bg-${r}`,t&&`text-${t}`,s&&`border-${s}`),children:l?(0,c.jsx)(x,{children:o}):o})}));w.displayName="Card",w.defaultProps={body:!1};var P=Object.assign(w,{Img:d,Title:g,Subtitle:y,Body:x,Link:v,Text:j,Header:h,Footer:Z,ImgOverlay:C})},51479:function(e,n,r){var t=r(94184),a=r.n(t),s=r(67294),i=r(76792),l=r(53439),o=r(85893);function c(e,n,r){const t=(e-n)/(r-n)*100;return Math.round(1e3*t)/1e3}function u({min:e,now:n,max:r,label:t,visuallyHidden:s,striped:i,animated:l,className:u,style:d,variant:m,bsPrefix:f,...h},p){return(0,o.jsx)("div",{ref:p,...h,role:"progressbar",className:a()(u,`${f}-bar`,{[`bg-${m}`]:m,[`${f}-bar-animated`]:l,[`${f}-bar-striped`]:l||i}),style:{width:`${c(n,e,r)}%`,...d},"aria-valuenow":n,"aria-valuemin":e,"aria-valuemax":r,children:s?(0,o.jsx)("span",{className:"visually-hidden",children:t}):t})}const d=s.forwardRef((({isChild:e,...n},r)=>{if(n.bsPrefix=(0,i.vE)(n.bsPrefix,"progress"),e)return u(n,r);const{min:t,now:c,max:d,label:m,visuallyHidden:f,striped:h,animated:p,bsPrefix:b,variant:x,className:g,children:y,...v}=n;return(0,o.jsx)("div",{ref:r,...v,className:a()(g,b),children:y?(0,l.UI)(y,(e=>(0,s.cloneElement)(e,{isChild:!0}))):u({min:t,now:c,max:d,label:m,visuallyHidden:f,striped:h,animated:p,bsPrefix:b,variant:x},r)})}));d.displayName="ProgressBar",d.defaultProps={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1},n.Z=d},98152:function(e,n,r){function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,s=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(t=r.next()).done)&&(s.push(t.value),!n||s.length!==n);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(n,{Z:function(){return a}})},71002:function(e,n,r){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}r.d(n,{Z:function(){return t}})}}]);
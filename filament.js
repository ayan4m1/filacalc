"use strict";(self.webpackChunkfilacalc=self.webpackChunkfilacalc||[]).push([[234],{6377:function(e,n,r){r.d(n,{y:function(){return h}});var a=r(982),t=r(5697),s=r.n(t),i=r(7294),l=r(8375),o=r(6025),d=r(4051),c=r(1555),m=r(4593),u=r(5893);const h=e=>{let{children:n}=e;return(0,u.jsx)(i.Fragment,{children:n})},x=e=>{let{children:n}=e;return Boolean(n)&&(0,u.jsx)("div",{className:"my-4",children:n})},p=e=>{let{title:n,icon:r,children:t}=e;return(0,u.jsxs)(i.Fragment,{children:[Boolean(n)&&(0,u.jsx)(m.q,{title:n}),(0,u.jsxs)("h1",{children:[Boolean(r)&&(0,u.jsx)(a.G,{icon:r,size:"2x"}),Boolean(n)&&` ${n}`]}),t]})},f=e=>{let{errors:n}=e;return null!=n&&n.length?(0,u.jsx)(l.Z,{className:"my-4",variant:"warning",children:(0,u.jsx)("ul",{className:"mb-0",children:n.map((e=>(0,u.jsx)("li",{children:e},e)))})}):null},g=e=>{let{title:n="Results",results:r,children:a}=e;return a||null!=r&&r.length?(0,u.jsxs)(o.Z,{body:!0,className:"my-4",children:[(0,u.jsx)(o.Z.Title,{children:n}),Boolean(null==r?void 0:r.length)&&r.map(((e,n)=>(0,u.jsxs)(d.Z,{className:Boolean(a)&&n===r.length-1?"mb-4":null,children:[(0,u.jsx)(c.Z,{sm:4,xs:2,children:(0,u.jsx)("strong",{children:e.label})}),(0,u.jsx)(c.Z,{sm:8,xs:10,children:e.content})]},e.label))),a]}):null};h.propTypes={children:s().node.isRequired},x.propTypes={children:s().node},p.propTypes={children:s().node,icon:s().oneOfType([s().string,s().object]),title:s().string},f.propTypes={errors:s().arrayOf(s().string.isRequired)},g.propTypes={title:s().string,results:s().oneOfType([s().arrayOf(s().object.isRequired),s().object.isRequired]),children:s().node},h.Errors=f,h.Heading=p,h.Results=g,h.Description=x},6089:function(e,n,r){r.r(n),r.d(n,{default:function(){return f}});var a=r(7294),t=r(682),s=r(4051),i=r(1555),l=r(6968),o=r(1479),d=r(3314),c=r(6377),m=r(882),u=r(2394),h=r(256),x=r(8903),p=r(5893);function f(){const{filamentDiameter:e}=(0,u.K)(),{formik:{setFieldValue:n,handleBlur:r,handleChange:f,values:g},errors:b,results:j}=(0,m.Z)({initialValues:{material:"",diameter:e,length:0,price:0,customMaterialDensity:0},shouldShow:(0,a.useCallback)(((e,n)=>n.material||e.material||n.length||e.length),[]),validate:(0,a.useCallback)((e=>{const n=[];return e.material||n.push("Select a material."),e.length<=0&&n.push("Extrusion length must be greater than zero."),e.diameter<=0&&n.push("Filament diameter must be greater than zero."),n}),[]),calculate:(0,a.useCallback)((e=>{const n=Math.PI*Math.pow(e.diameter/2,2)*(1e3*e.length)/1e3,r=n*("custom"!==e.material?(0,x.Ut)(e.material).density:e.customMaterialDensity);let a=0;return e.price>0&&(a=r/1e3*e.price),[{label:"Volume",content:(0,p.jsxs)("span",{children:[n.toFixed(2)," cm",(0,p.jsx)("sup",{children:"3"})]})},{label:"Mass",content:(0,p.jsxs)("span",{children:[r.toFixed(2)," g"]})},{label:"Cost",content:(0,p.jsx)("span",{children:a.toFixed(2)})},{label:"Prints per kg",content:(0,p.jsx)("span",{children:Math.floor(1e3/r)})}]}),[])}),y=(0,h.Z)((0,a.useCallback)((e=>n("length",e.length.toFixed(2))),[n]));return y.loading?(0,p.jsxs)(c.y,{children:[(0,p.jsx)(c.y.Heading,{title:"Filament Usage"}),(0,p.jsxs)(t.Z,{children:[(0,p.jsx)(s.Z,{children:(0,p.jsx)(i.Z,{className:"text-center",children:(0,p.jsx)("h4",{children:"Parsing your G-code..."})})}),(0,p.jsx)(s.Z,{children:(0,p.jsxs)(i.Z,{className:"text-center",children:[(0,p.jsx)(l.Z,{animation:"border",className:"my-3"}),(0,p.jsx)(o.Z,{animated:!0,now:y.progress,variant:"primary"})]})})]})]}):(0,p.jsxs)(c.y,{children:[(0,p.jsx)(c.y.Heading,{title:"Filament Usage"}),(0,p.jsxs)(c.y.Description,{children:[(0,p.jsx)("p",{children:"Use this calculator to determine how much filament a given print will consume."}),(0,p.jsx)("p",{children:"You can either enter the filament length manually or parse a G-code file to derive this information."})]}),(0,p.jsxs)(d.Z,{children:[(0,p.jsxs)(d.Z.Group,{children:[(0,p.jsx)(d.Z.Label,{children:"Select a G-code file"}),(0,p.jsx)(d.Z.Control,{isInvalid:y.error,onChange:y.handleChange,type:"file"}),(0,p.jsx)(d.Z.Text,{className:"text-muted",children:"Files are parsed in your browser, not sent to a server."}),(0,p.jsx)(d.Z.Control.Feedback,{type:"invalid",children:"Unable to parse the selected file."})]}),(0,p.jsxs)(d.Z.Group,{children:[(0,p.jsx)(d.Z.Label,{children:"Material"}),(0,p.jsxs)(d.Z.Select,{name:"material",onBlur:r,onChange:f,value:g.material,children:[(0,p.jsx)("option",{value:"",children:"Select One"}),x.NC.map((e=>(0,p.jsx)("option",{value:e.name,children:e.name},e.name))),(0,p.jsx)("option",{value:"custom",children:"Custom"})]})]}),"custom"===g.material&&(0,p.jsxs)(d.Z.Group,{children:[(0,p.jsxs)(d.Z.Label,{children:["Custom Material Density (g/cm",(0,p.jsx)("sup",{children:"3"}),")"]}),(0,p.jsx)(d.Z.Control,{min:"0",name:"customMaterialDensity",onChange:f,type:"number",value:g.customMaterialDensity})]}),(0,p.jsxs)(d.Z.Group,{children:[(0,p.jsx)(d.Z.Label,{children:"Diameter (mm)"}),(0,p.jsx)(d.Z.Control,{min:"0",name:"diameter",onChange:f,value:g.diameter})]}),(0,p.jsxs)(d.Z.Group,{children:[(0,p.jsx)(d.Z.Label,{children:"Length (m)"}),(0,p.jsx)(d.Z.Control,{min:"0",name:"length",onBlur:r,onChange:f,value:g.length})]}),(0,p.jsxs)(d.Z.Group,{children:[(0,p.jsx)(d.Z.Label,{children:"Price (cost/kg)"}),(0,p.jsx)(d.Z.Control,{min:"0",name:"price",onChange:f,value:g.price})]})]}),(0,p.jsx)(c.y.Errors,{errors:b}),(0,p.jsx)(c.y.Results,{results:j})]})}},882:function(e,n,r){r.d(n,{Z:function(){return s}});var a=r(8485),t=r(7294);function s(e){let{initialValues:n,calculate:r,shouldShow:s,validate:i}=e;const[l,o]=(0,t.useState)(null),[d,c]=(0,t.useState)([]),m=(0,a.TA)({initialValues:n}),{values:u,touched:h}=m;return(0,t.useEffect)((()=>{if(!s(u,h))return c([]),void o(null);const e=i(u);e.length>0?(c(e),o(null)):(c([]),o(r(u)))}),[u,h,s,i,r,o]),{formik:m,results:l,errors:d}}},256:function(e,n,r){r.d(n,{Z:function(){return i}});var a=r(7294),t=()=>{const e=e=>{for(const[,,,n,r]of[...e.trim().matchAll(/(\s*(([XYZFEIJR])([0-9\-.]+))\s*)/g)])if("E"===n)return parseFloat(r);return 0};self.addEventListener("message",(({data:n})=>{const r=new FileReader;let a=0,t=0;r.addEventListener("load",(n=>{const r=n.target.result.split(/[\n]/g).filter((e=>/^G[1-3]/.test(e)));for(const[n,s]of r.entries()){a+=e(s);const i=Math.round(n/r.length*100);i!==t&&(postMessage({type:"progress",progress:i}),t=i)}a>0&&postMessage({type:"result",length:a/1e3})})),r.addEventListener("error",(e=>{postMessage({type:"error",error:e})})),r.readAsText(n)}))},s=r(8903);function i(e){const n=(0,a.useMemo)((()=>(0,s.j1)(t)),[]),[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(0),m=(0,a.useCallback)((n=>{let{data:r}=n;switch(r.type){case"progress":c(r.progress);break;case"result":e(r),o(!1),c(100);break;case"error":i(!0),o(!1)}}),[e,c,o,i]),u=(0,a.useCallback)((e=>{const{target:{files:[r]}}=e;if(!r||!r.name.endsWith(".gcode"))return i(!0),void o(!1);i(!1),o(!0),c(0),n.postMessage(r)}),[n]);return(0,a.useEffect)((()=>(n.addEventListener("message",m),()=>n.removeEventListener("message",m)))),{loading:l,error:r,progress:d,handleChange:u}}},8903:function(e,n,r){r.d(n,{AF:function(){return d},Hk:function(){return x},Kl:function(){return u},NC:function(){return i},OK:function(){return o},Q:function(){return m},Ut:function(){return l},ZM:function(){return t},bA:function(){return c},j1:function(){return a},lO:function(){return h},w5:function(){return s}});const a=e=>{if("object"!=typeof window)return;const n=e.toString(),r=new Blob([`(${n})()`]);return new Worker(URL.createObjectURL(r))},t=[{brand:"3D Solutech",mass:173},{brand:"Amazon Basics",mass:248},{brand:"Amolen",mass:190},{brand:"Atomic Filament",mass:306},{brand:"Colorfabb",mass:236},{brand:"eSun",mass:224},{brand:"Inland",mass:225},{brand:"Hatchbox",mass:225},{brand:"Overture - Plastic",mass:237},{brand:"Overture - Cardboard",mass:177},{brand:"PolyMaker",mass:220},{brand:"Prusament",mass:201},{brand:"ProtoPasta",mass:70},{brand:"StrongHero3D",mass:151},{brand:"SunLu",mass:133},{brand:"ZYLtech",mass:179}],s=e=>t.find((n=>n.brand===e)),i=[{name:"PLA",density:1.24},{name:"ABS",density:1.04},{name:"PETG",density:1.27},{name:"Nylon",density:1.52},{name:"TPU",density:1.21},{name:"PC",density:1.3},{name:"CF",density:1.3},{name:"HIPS",density:1.03},{name:"PVA",density:1.23},{name:"ASA",density:1.05},{name:"PP",density:.9},{name:"POM",density:1.4},{name:"PMMA",density:1.18}],l=e=>i.find((n=>n.name===e)),o=[{name:"Mk8",diameter:2.4,length:13},{name:"Mk10",diameter:4,length:13},{name:"Volcano 1.75mm",diameter:2,length:21},{name:"Volcano 3mm",diameter:3.2,length:21}],d=e=>o.find((n=>n.name===e)),c=[{name:"Ender 3",meltZoneDiameter:2,meltZoneLength:25},{name:"Volcano",meltZoneDiameter:6,meltZoneLength:19}],m=e=>c.find((n=>n.name===e)),u=[1.8,.9,7.5],h=[1.25,1,12,16,25,1.41111,1.27,1.5875],x=e=>{let n=0;const r=e.currentWeight-e.spoolWeight;n="custom"!==e.material?r/l(e.material).density:r/e.materialDensity;return{mass:r,volume:n,length:n/Math.PI/Math.pow(e.filamentDiameter/2,2),percent:r/e.netWeight*100}}},8375:function(e,n,r){var a=r(4184),t=r.n(a),s=r(7294),i=r(8523),l=r(8146),o=r(3735),d=r(6792),c=r(1068),m=r(1485),u=r(9602),h=r(4680),x=r(5893);const p=(0,u.Z)("h4");p.displayName="DivStyledAsH4";const f=(0,h.Z)("alert-heading",{Component:p}),g=(0,h.Z)("alert-link",{Component:o.Z}),b={variant:"primary",show:!0,transition:c.Z,closeLabel:"Close alert"},j=s.forwardRef(((e,n)=>{const{bsPrefix:r,show:a,closeLabel:s,closeVariant:o,className:u,children:h,variant:p,onClose:f,dismissible:g,transition:b,...j}=(0,i.Ch)(e,{show:"onClose"}),y=(0,d.vE)(r,"alert"),v=(0,l.Z)((e=>{f&&f(!1,e)})),Z=!0===b?c.Z:b,C=(0,x.jsxs)("div",{role:"alert",...Z?void 0:j,ref:n,className:t()(u,y,p&&`${y}-${p}`,g&&`${y}-dismissible`),children:[g&&(0,x.jsx)(m.Z,{onClick:v,"aria-label":s,variant:o}),h]});return Z?(0,x.jsx)(Z,{unmountOnExit:!0,...j,ref:void 0,in:a,children:C}):a?C:null}));j.displayName="Alert",j.defaultProps=b,n.Z=Object.assign(j,{Link:g,Heading:f})},6025:function(e,n,r){r.d(n,{Z:function(){return w}});var a=r(4184),t=r.n(a),s=r(7294),i=r(6792),l=r(4680),o=r(9602),d=r(5893);const c=s.forwardRef((({bsPrefix:e,className:n,variant:r,as:a="img",...s},l)=>{const o=(0,i.vE)(e,"card-img");return(0,d.jsx)(a,{ref:l,className:t()(r?`${o}-${r}`:o,n),...s})}));c.displayName="CardImg";var m=c,u=r(9059);const h=s.forwardRef((({bsPrefix:e,className:n,as:r="div",...a},l)=>{const o=(0,i.vE)(e,"card-header"),c=(0,s.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,d.jsx)(u.Z.Provider,{value:c,children:(0,d.jsx)(r,{ref:l,...a,className:t()(n,o)})})}));h.displayName="CardHeader";var x=h;const p=(0,o.Z)("h5"),f=(0,o.Z)("h6"),g=(0,l.Z)("card-body"),b=(0,l.Z)("card-title",{Component:p}),j=(0,l.Z)("card-subtitle",{Component:f}),y=(0,l.Z)("card-link",{Component:"a"}),v=(0,l.Z)("card-text",{Component:"p"}),Z=(0,l.Z)("card-footer"),C=(0,l.Z)("card-img-overlay"),P=s.forwardRef((({bsPrefix:e,className:n,bg:r,text:a,border:s,body:l,children:o,as:c="div",...m},u)=>{const h=(0,i.vE)(e,"card");return(0,d.jsx)(c,{ref:u,...m,className:t()(n,h,r&&`bg-${r}`,a&&`text-${a}`,s&&`border-${s}`),children:l?(0,d.jsx)(g,{children:o}):o})}));P.displayName="Card",P.defaultProps={body:!1};var w=Object.assign(P,{Img:m,Title:b,Subtitle:j,Body:g,Link:y,Text:v,Header:x,Footer:Z,ImgOverlay:C})},1479:function(e,n,r){var a=r(4184),t=r.n(a),s=r(7294),i=r(6792),l=r(3439),o=r(5893);function d(e,n,r){const a=(e-n)/(r-n)*100;return Math.round(1e3*a)/1e3}function c({min:e,now:n,max:r,label:a,visuallyHidden:s,striped:i,animated:l,className:c,style:m,variant:u,bsPrefix:h,...x},p){return(0,o.jsx)("div",{ref:p,...x,role:"progressbar",className:t()(c,`${h}-bar`,{[`bg-${u}`]:u,[`${h}-bar-animated`]:l,[`${h}-bar-striped`]:l||i}),style:{width:`${d(n,e,r)}%`,...m},"aria-valuenow":n,"aria-valuemin":e,"aria-valuemax":r,children:s?(0,o.jsx)("span",{className:"visually-hidden",children:a}):a})}const m=s.forwardRef((({isChild:e,...n},r)=>{if(n.bsPrefix=(0,i.vE)(n.bsPrefix,"progress"),e)return c(n,r);const{min:a,now:d,max:m,label:u,visuallyHidden:h,striped:x,animated:p,bsPrefix:f,variant:g,className:b,children:j,...y}=n;return(0,o.jsx)("div",{ref:r,...y,className:t()(b,f),children:j?(0,l.UI)(j,(e=>(0,s.cloneElement)(e,{isChild:!0}))):c({min:a,now:d,max:m,label:u,visuallyHidden:h,striped:x,animated:p,bsPrefix:f,variant:g},r)})}));m.displayName="ProgressBar",m.defaultProps={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1},n.Z=m}}]);
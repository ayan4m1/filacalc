"use strict";(self.webpackChunkfilacalc=self.webpackChunkfilacalc||[]).push([[234],{36089:function(e,n,r){r.r(n),r.d(n,{default:function(){return b}});var t=r(67294),a=r(10682),s=r(34051),i=r(31555),l=r(36968),o=r(51479),c=r(23314),d=r(64593),u=r(60036),m=r(49306),h=r(50882),f=r(70256),p=r(48903),x=r(85893);function b(){var e=(0,h.Z)({initialValues:{material:"",diameter:1.75,length:0,price:0,customMaterialDensity:0},shouldShow:(0,t.useCallback)((function(e,n){return n.material||e.material||n.length}),[]),validate:(0,t.useCallback)((function(e){var n=[];return e.material||n.push("Select a material."),e.length<=0&&n.push("Extrusion length must be greater than zero."),e.diameter<=0&&n.push("Filament diameter must be greater than zero."),n}),[]),calculate:(0,t.useCallback)((function(e){var n=Math.PI*Math.pow(e.diameter/2,2)*(1e3*e.length)/1e3,r=n*("custom"!==e.material?(0,p.Ut)(e.material).density:e.customMaterialDensity),t=0;return e.price>0&&(t=r/1e3*e.price),[{label:"Volume",content:(0,x.jsxs)("span",{children:[n.toFixed(2)," cm",(0,x.jsx)("sup",{children:"3"})]})},{label:"Mass",content:(0,x.jsxs)("span",{children:[r.toFixed(2)," g"]})},{label:"Cost",content:(0,x.jsx)("span",{children:t.toFixed(2)})},{label:"Prints per kg",content:(0,x.jsx)("span",{children:Math.floor(1e3/r)})}]}),[])}),n=e.formik,r=n.values,b=n.handleChange,g=n.handleBlur,v=n.setFieldValue,y=e.results,Z=e.errors,j=(0,f.Z)((function(e){return v("length",e.length.toFixed(2))})),C=j.loading,P=j.error,w=j.progress,N=j.handleChange;return C?(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(d.q,{title:"Filament Usage"}),(0,x.jsx)("h1",{children:"Filament Usage"}),(0,x.jsxs)(a.Z,{children:[(0,x.jsx)(s.Z,{children:(0,x.jsx)(i.Z,{className:"text-center",children:(0,x.jsx)("h4",{children:"Parsing your G-code..."})})}),(0,x.jsx)(s.Z,{children:(0,x.jsxs)(i.Z,{className:"text-center",children:[(0,x.jsx)(l.Z,{animation:"border",className:"my-3"}),(0,x.jsx)(o.Z,{animated:!0,now:w,variant:"primary"})]})})]})]}):(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(d.q,{title:"Filament Usage"}),(0,x.jsx)("h1",{children:"Filament Usage"}),(0,x.jsx)("p",{children:"Use this calculator to determine how much filament a given print will consume. You can either enter the filament length manually or parse a G-code file to derive this information."}),(0,x.jsxs)(c.Z,{children:[(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Select a G-code file"}),(0,x.jsx)(c.Z.Control,{isInvalid:P,onChange:N,type:"file"}),(0,x.jsx)(c.Z.Text,{className:"text-muted",children:"Files are parsed in your browser, not sent to a server."}),(0,x.jsx)(c.Z.Control.Feedback,{type:"invalid",children:"Unable to parse the selected file."})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Material"}),(0,x.jsxs)(c.Z.Select,{name:"material",onBlur:g,onChange:b,value:r.material,children:[(0,x.jsx)("option",{value:"",children:"Select One"}),p.NC.map((function(e){return(0,x.jsx)("option",{value:e.name,children:e.name},e.name)})),(0,x.jsx)("option",{value:"custom",children:"Custom"})]})]}),"custom"===r.material&&(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsxs)(c.Z.Label,{children:["Custom Material Density (g/cm",(0,x.jsx)("sup",{children:"3"}),")"]}),(0,x.jsx)(c.Z.Control,{min:"0",name:"customMaterialDensity",onChange:b,type:"number",value:r.customMaterialDensity})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Diameter (mm)"}),(0,x.jsx)(c.Z.Control,{min:"0",name:"diameter",onChange:b,value:r.diameter})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Length (m)"}),(0,x.jsx)(c.Z.Control,{min:"0",name:"length",onBlur:g,onChange:b,value:r.length})]}),(0,x.jsxs)(c.Z.Group,{children:[(0,x.jsx)(c.Z.Label,{children:"Price (cost/kg)"}),(0,x.jsx)(c.Z.Control,{min:"0",name:"price",onChange:b,value:r.price})]})]}),(0,x.jsx)(u.Z,{errors:Z}),(0,x.jsx)(m.Z,{results:y})]})}},60036:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(45697),a=r.n(t),s=r(88375),i=r(85893);function l(e){var n=e.errors;return null!=n&&n.length?(0,i.jsx)(s.Z,{className:"my-4",variant:"warning",children:(0,i.jsx)("ul",{className:"mb-0",children:n.map((function(e){return(0,i.jsx)("li",{children:e},e)}))})}):null}l.propTypes={errors:a().arrayOf(a().string).isRequired}},49306:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(45697),a=r.n(t),s=r(86025),i=r(34051),l=r(31555),o=r(85893);function c(e){var n=e.children,r=e.results,t=e.title,a=void 0===t?"Results":t;return n||r?(0,o.jsxs)(s.Z,{body:!0,className:"my-4",children:[(0,o.jsx)(s.Z.Title,{children:a}),(null==r?void 0:r.length)>0&&r.map((function(e,t){return(0,o.jsxs)(i.Z,{className:Boolean(n)&&t===r.length-1?"mb-4":null,children:[(0,o.jsx)(l.Z,{xs:2,children:(0,o.jsx)("strong",{children:e.label})}),(0,o.jsx)(l.Z,{xs:10,children:e.content})]},e.label)})),n]}):null}c.propTypes={children:a().node,results:a().arrayOf(a().shape({label:a().string.isRequired,content:a().oneOfType([a().node,a().string]).isRequired})),title:a().string}},50882:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(70885),a=r(38485),s=r(67294);function i(e){var n=e.initialValues,r=e.calculate,i=e.shouldShow,l=e.validate,o=(0,s.useState)(null),c=(0,t.Z)(o,2),d=c[0],u=c[1],m=(0,s.useState)([]),h=(0,t.Z)(m,2),f=h[0],p=h[1],x=(0,a.TA)({initialValues:n}),b=x.values,g=x.touched;return(0,s.useEffect)((function(){if(!i(b,g))return p([]),void u(null);var e=l(b);e.length>0?(p(e),u(null)):(p([]),u(r(b)))}),[b,g,i,l,r,u]),{formik:x,results:d,errors:f}}},70256:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(70885),a=r(67294),s=()=>{const e=e=>{for(const[,,,n,r]of[...e.trim().matchAll(/(\s*(([XYZFEIJR])([0-9\-.]+))\s*)/g)])if("E"===n)return parseFloat(r);return 0};self.addEventListener("message",(({data:n})=>{const r=new FileReader;let t=0,a=0;r.addEventListener("load",(n=>{const r=n.target.result.split(/[\n]/g).filter((e=>/^G[1-3]/.test(e)));for(const[n,s]of r.entries()){t+=e(s);const i=Math.round(n/r.length*100);i!==a&&(postMessage({type:"progress",progress:i}),a=i)}t>0&&postMessage({type:"result",length:t/1e3})})),r.addEventListener("error",(()=>{postMessage({type:"error"})})),r.readAsText(n)}))},i=r(48903);function l(e){var n=(0,a.useMemo)((function(){return(0,i.j1)(s)}),[]),r=(0,a.useState)(!1),l=(0,t.Z)(r,2),o=l[0],c=l[1],d=(0,a.useState)(!1),u=(0,t.Z)(d,2),m=u[0],h=u[1],f=(0,a.useState)(0),p=(0,t.Z)(f,2),x=p[0],b=p[1],g=(0,a.useCallback)((function(n){var r=n.data;switch(r.type){case"progress":b(r.progress);break;case"result":e(r),h(!1),b(100);break;case"error":c(!0),h(!1)}}),[e,b,h,c]),v=(0,a.useCallback)((function(e){var r=(0,t.Z)(e.target.files,1)[0];if(!r||!r.name.endsWith(".gcode"))return c(!0),void h(!1);c(!1),h(!0),b(0),n.postMessage(r)}),[n]);return(0,a.useEffect)((function(){return n.addEventListener("message",g),function(){return n.removeEventListener("message",g)}})),{loading:m,error:o,progress:x,handleChange:v}}},48903:function(e,n,r){r.d(n,{AF:function(){return d},Hk:function(){return p},Kl:function(){return h},NC:function(){return l},OK:function(){return c},Q:function(){return m},Ut:function(){return o},ZM:function(){return s},bA:function(){return u},j1:function(){return a},lO:function(){return f},w5:function(){return i}});var t=r(71002),a=function(e){if("object"===("undefined"==typeof window?"undefined":(0,t.Z)(window))){var n=e.toString(),r=new Blob(["(".concat(n,")()")]);return new Worker(URL.createObjectURL(r))}},s=[{brand:"3D Solutech",mass:173},{brand:"Amazon Basics",mass:248},{brand:"Amolen",mass:190},{brand:"Atomic Filament",mass:306},{brand:"Colorfabb",mass:236},{brand:"eSun",mass:224},{brand:"Inland",mass:225},{brand:"Hatchbox",mass:225},{brand:"Overture",mass:237},{brand:"PolyMaker",mass:220},{brand:"Prusament",mass:201},{brand:"ProtoPasta",mass:70},{brand:"StrongHero3D",mass:151},{brand:"SunLu",mass:133},{brand:"ZYLtech",mass:179}],i=function(e){return s.find((function(n){return n.brand===e}))},l=[{name:"PLA",density:1.24},{name:"ABS",density:1.04},{name:"PETG",density:1.27},{name:"Nylon",density:1.52},{name:"TPU",density:1.21},{name:"PC",density:1.3},{name:"CF",density:1.3},{name:"HIPS",density:1.03},{name:"PVA",density:1.23},{name:"ASA",density:1.05},{name:"PP",density:.9},{name:"POM",density:1.4},{name:"PMMA",density:1.18}],o=function(e){return l.find((function(n){return n.name===e}))},c=[{name:"Mk8",diameter:2.4,length:13},{name:"Mk10",diameter:4,length:13},{name:"Volcano 1.75mm",diameter:2,length:21},{name:"Volcano 3mm",diameter:3.2,length:21}],d=function(e){return c.find((function(n){return n.name===e}))},u=[{name:"Ender 3",meltZoneDiameter:2,meltZoneLength:25},{name:"Volcano",meltZoneDiameter:6,meltZoneLength:19}],m=function(e){return u.find((function(n){return n.name===e}))},h=[1.8,.9,7.5],f=[1.25,1,12,16,25,1.41111,1.27,1.5875],p=function(e){var n=0,r=e.currentWeight-e.spoolWeight;return{mass:r,volume:n="custom"!==e.material?r/o(e.material).density:r/e.materialDensity,length:n/Math.PI/Math.pow(e.filamentDiameter/2,2),percent:r/e.netWeight*100}}},88375:function(e,n,r){var t=r(94184),a=r.n(t),s=r(67294),i=r(14289),l=r(78146),o=r(23735),c=r(76792),d=r(41068),u=r(41485),m=r(39602),h=r(44680),f=r(85893);const p=(0,m.Z)("h4");p.displayName="DivStyledAsH4";const x=(0,h.Z)("alert-heading",{Component:p}),b=(0,h.Z)("alert-link",{Component:o.Z}),g={variant:"primary",show:!0,transition:d.Z,closeLabel:"Close alert"},v=s.forwardRef(((e,n)=>{const{bsPrefix:r,show:t,closeLabel:s,closeVariant:o,className:m,children:h,variant:p,onClose:x,dismissible:b,transition:g,...v}=(0,i.Ch)(e,{show:"onClose"}),y=(0,c.vE)(r,"alert"),Z=(0,l.Z)((e=>{x&&x(!1,e)})),j=!0===g?d.Z:g,C=(0,f.jsxs)("div",{role:"alert",...j?void 0:v,ref:n,className:a()(m,y,p&&`${y}-${p}`,b&&`${y}-dismissible`),children:[b&&(0,f.jsx)(u.Z,{onClick:Z,"aria-label":s,variant:o}),h]});return j?(0,f.jsx)(j,{unmountOnExit:!0,...v,ref:void 0,in:t,children:C}):t?C:null}));v.displayName="Alert",v.defaultProps=g,n.Z=Object.assign(v,{Link:b,Heading:x})},86025:function(e,n,r){r.d(n,{Z:function(){return w}});var t=r(94184),a=r.n(t),s=r(67294),i=r(76792),l=r(44680),o=r(39602),c=r(85893);const d=s.forwardRef((({bsPrefix:e,className:n,variant:r,as:t="img",...s},l)=>{const o=(0,i.vE)(e,"card-img");return(0,c.jsx)(t,{ref:l,className:a()(r?`${o}-${r}`:o,n),...s})}));d.displayName="CardImg";var u=d,m=r(49059);const h=s.forwardRef((({bsPrefix:e,className:n,as:r="div",...t},l)=>{const o=(0,i.vE)(e,"card-header"),d=(0,s.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,c.jsx)(m.Z.Provider,{value:d,children:(0,c.jsx)(r,{ref:l,...t,className:a()(n,o)})})}));h.displayName="CardHeader";var f=h;const p=(0,o.Z)("h5"),x=(0,o.Z)("h6"),b=(0,l.Z)("card-body"),g=(0,l.Z)("card-title",{Component:p}),v=(0,l.Z)("card-subtitle",{Component:x}),y=(0,l.Z)("card-link",{Component:"a"}),Z=(0,l.Z)("card-text",{Component:"p"}),j=(0,l.Z)("card-footer"),C=(0,l.Z)("card-img-overlay"),P=s.forwardRef((({bsPrefix:e,className:n,bg:r,text:t,border:s,body:l,children:o,as:d="div",...u},m)=>{const h=(0,i.vE)(e,"card");return(0,c.jsx)(d,{ref:m,...u,className:a()(n,h,r&&`bg-${r}`,t&&`text-${t}`,s&&`border-${s}`),children:l?(0,c.jsx)(b,{children:o}):o})}));P.displayName="Card",P.defaultProps={body:!1};var w=Object.assign(P,{Img:u,Title:g,Subtitle:v,Body:b,Link:y,Text:Z,Header:f,Footer:j,ImgOverlay:C})},51479:function(e,n,r){var t=r(94184),a=r.n(t),s=r(67294),i=r(76792),l=r(53439),o=r(85893);function c(e,n,r){const t=(e-n)/(r-n)*100;return Math.round(1e3*t)/1e3}function d({min:e,now:n,max:r,label:t,visuallyHidden:s,striped:i,animated:l,className:d,style:u,variant:m,bsPrefix:h,...f},p){return(0,o.jsx)("div",{ref:p,...f,role:"progressbar",className:a()(d,`${h}-bar`,{[`bg-${m}`]:m,[`${h}-bar-animated`]:l,[`${h}-bar-striped`]:l||i}),style:{width:`${c(n,e,r)}%`,...u},"aria-valuenow":n,"aria-valuemin":e,"aria-valuemax":r,children:s?(0,o.jsx)("span",{className:"visually-hidden",children:t}):t})}const u=s.forwardRef((({isChild:e,...n},r)=>{if(n.bsPrefix=(0,i.vE)(n.bsPrefix,"progress"),e)return d(n,r);const{min:t,now:c,max:u,label:m,visuallyHidden:h,striped:f,animated:p,bsPrefix:x,variant:b,className:g,children:v,...y}=n;return(0,o.jsx)("div",{ref:r,...y,className:a()(g,x),children:v?(0,l.UI)(v,(e=>(0,s.cloneElement)(e,{isChild:!0}))):d({min:t,now:c,max:u,label:m,visuallyHidden:h,striped:f,animated:p,bsPrefix:x,variant:b},r)})}));u.displayName="ProgressBar",u.defaultProps={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1},n.Z=u},71002:function(e,n,r){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}r.d(n,{Z:function(){return t}})}}]);
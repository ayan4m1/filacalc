"use strict";(self.webpackChunkfilacalc=self.webpackChunkfilacalc||[]).push([[234],{64275:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var t=r(94649),a=r(67294),s=r(94184),i=r.n(s),l=r(76792),o=r(53439),c=r(85893);function d(e,n,r){const t=(e-n)/(r-n)*100;return Math.round(1e3*t)/1e3}function u({min:e,now:n,max:r,label:t,visuallyHidden:a,striped:s,animated:l,className:o,style:u,variant:m,bsPrefix:f,...h},x){return(0,c.jsx)("div",{ref:x,...h,role:"progressbar",className:i()(o,`${f}-bar`,{[`bg-${m}`]:m,[`${f}-bar-animated`]:l,[`${f}-bar-striped`]:l||s}),style:{width:`${d(n,e,r)}%`,...u},"aria-valuenow":n,"aria-valuemin":e,"aria-valuemax":r,children:a?(0,c.jsx)("span",{className:"visually-hidden",children:t}):t})}const m=a.forwardRef((({isChild:e,...n},r)=>{if(n.bsPrefix=(0,l.vE)(n.bsPrefix,"progress"),e)return u(n,r);const{min:t,now:s,max:d,label:m,visuallyHidden:f,striped:h,animated:x,bsPrefix:b,variant:p,className:g,children:y,...v}=n;return(0,c.jsx)("div",{ref:r,...v,className:i()(g,b),children:y?(0,o.UI)(y,(e=>(0,a.cloneElement)(e,{isChild:!0}))):u({min:t,now:s,max:d,label:m,visuallyHidden:f,striped:h,animated:x,bsPrefix:b,variant:p},r)})}));m.displayName="ProgressBar",m.defaultProps={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1};var f=m,h=r(10682),x=r(34051),b=r(31555),p=r(36968),g=r(23314),y=r(82747),v=r(88375),j=r(64593),Z=r(49306),C=r(48903),w=r(98152),P=()=>{const e=e=>{for(const[,,,n,r]of[...e.trim().matchAll(/(\s*(([XYZFEIJR])([0-9\-.]+))\s*)/g)])if("E"===n)return parseFloat(r);return 0};self.addEventListener("message",(({data:n})=>{const r=new FileReader;let t=0,a=0;r.addEventListener("load",(n=>{const r=n.target.result.split(/[\n]/g).filter((e=>/^G[1-3]/.test(e)));for(const[n,s]of r.entries()){t+=e(s);const i=Math.round(n/r.length*100);i!==a&&(postMessage({type:"progress",progress:i}),a=i)}t>0&&postMessage({type:"result",length:t/1e3})})),r.addEventListener("error",(()=>{postMessage({type:"error"})})),r.readAsText(n)}))};function N(){var e=(0,t.TA)({initialValues:{material:null,diameter:1.75,length:0,price:0,customMaterialDensity:0}}),n=e.values,r=e.touched,s=e.handleChange,i=e.setFieldValue,l=function(e){var n=(0,a.useMemo)((function(){return(0,C.j1)(P)}),[]),r=(0,a.useState)(!1),t=(0,w.Z)(r,2),s=t[0],i=t[1],l=(0,a.useState)(!1),o=(0,w.Z)(l,2),c=o[0],d=o[1],u=(0,a.useState)(0),m=(0,w.Z)(u,2),f=m[0],h=m[1],x=(0,a.useCallback)((function(n){var r=n.data;switch(r.type){case"progress":h(r.progress);break;case"result":e(r),d(!1),h(100);break;case"error":i(!0),d(!1)}}),[e,h,d,i]),b=(0,a.useCallback)((function(e){if(!e||!e.name.endsWith(".gcode"))return i(!0),void d(!1);i(!1),d(!0),h(0),n.postMessage(e)}),[n]);return(0,a.useEffect)((function(){return n.addEventListener("message",x),function(){return n.removeEventListener("message",x)}})),{loading:c,error:s,progress:f,parse:b}}((function(e){return i("length",e.length.toFixed(2))})),o=l.loading,d=l.error,u=l.progress,m=l.parse,N=(0,a.useCallback)((function(e){return i("material",e)}),[i]),M=(0,a.useCallback)((function(e){return m(e.target.files[0])}),[m]),L=0,k=0,A=0;if((n.material||n.customMaterialDensity&&n.length>0&&n.diameter>0)&&(L=(k=Math.PI*Math.pow(n.diameter/2,2)*(1e3*n.length)/1e3)*("custom"!==n.material?(0,C.Ut)(n.material).density:n.customMaterialDensity),n.price>0&&(A=L/1e3*n.price)),o)return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(j.q,{title:"Filament Usage"}),(0,c.jsx)("h1",{children:"Filament Usage"}),(0,c.jsxs)(h.Z,{children:[(0,c.jsx)(x.Z,{children:(0,c.jsx)(b.Z,{className:"text-center",children:(0,c.jsx)("h4",{children:"Parsing your G-code..."})})}),(0,c.jsx)(x.Z,{children:(0,c.jsxs)(b.Z,{className:"text-center",children:[(0,c.jsx)(p.Z,{animation:"border",className:"my-3"}),(0,c.jsx)(f,{variant:"primary",animated:!0,now:u})]})})]})]});var S=Boolean(n.material),F=!S&&n.length>0&&!r.material,E="Select One";return n.material&&(E="custom"===n.material?"Custom":n.material),(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(j.q,{title:"Filament Usage"}),(0,c.jsx)("h1",{children:"Filament Usage"}),(0,c.jsx)("p",{children:"Use this calculator to determine how much filament a given print will consume. You can either enter the filament length manually or parse a G-code file to derive this information."}),(0,c.jsxs)(g.Z,{children:[(0,c.jsxs)(g.Z.Group,{children:[(0,c.jsx)(g.Z.Label,{children:"Select a G-code file"}),(0,c.jsx)(g.Z.Control,{type:"file",onChange:M,isInvalid:d}),(0,c.jsx)(g.Z.Text,{className:"text-muted",children:"Files are parsed in your browser, not sent to a server."}),(0,c.jsx)(g.Z.Control.Feedback,{type:"invalid",children:"Unable to parse the selected file."})]}),(0,c.jsxs)(g.Z.Group,{children:[(0,c.jsx)(g.Z.Label,{children:"Material"}),(0,c.jsxs)(y.Z,{onSelect:N,children:[(0,c.jsx)(y.Z.Toggle,{variant:"primary",children:E}),(0,c.jsxs)(y.Z.Menu,{children:[C.NC.map((function(e){return(0,c.jsx)(y.Z.Item,{eventKey:e.name,children:e.name},e.name)})),(0,c.jsx)(y.Z.Item,{eventKey:"custom",children:"Custom"})]})]})]}),"custom"===n.material&&(0,c.jsxs)(g.Z.Group,{children:[(0,c.jsxs)(g.Z.Label,{children:["Custom Material Density (g/cm",(0,c.jsx)("sup",{children:"3"}),")"]}),(0,c.jsx)(g.Z.Control,{type:"number",min:"0",name:"customMaterialDensity",value:n.customMaterialDensity,onChange:s})]}),(0,c.jsxs)(g.Z.Group,{children:[(0,c.jsx)(g.Z.Label,{children:"Diameter (mm)"}),(0,c.jsx)(g.Z.Control,{name:"diameter",min:"0",onChange:s,value:n.diameter})]}),(0,c.jsxs)(g.Z.Group,{children:[(0,c.jsx)(g.Z.Label,{children:"Length (m)"}),(0,c.jsx)(g.Z.Control,{name:"length",min:"0",onChange:s,value:n.length})]}),(0,c.jsxs)(g.Z.Group,{children:[(0,c.jsx)(g.Z.Label,{children:"Price (cost/kg)"}),(0,c.jsx)(g.Z.Control,{name:"price",min:"0",onChange:s,value:n.price})]})]}),S&&(0,c.jsx)(Z.Z,{results:[{label:"Volume",content:(0,c.jsxs)("span",{children:[k.toFixed(2)," cm",(0,c.jsx)("sup",{children:"3"})]})},{label:"Mass",content:(0,c.jsxs)("span",{children:[L.toFixed(2)," g"]})},{label:"Cost",content:(0,c.jsx)("span",{children:A.toFixed(2)})},{label:"Prints per kg",content:(0,c.jsx)("span",{children:Math.floor(1e3/L)})}]}),F&&(0,c.jsx)(v.Z,{variant:"warning",className:"my-4",children:"Select a material"})]})}},49306:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(45697),a=r.n(t),s=r(86025),i=r(34051),l=r(31555),o=r(85893);function c(e){var n=e.children,r=e.results,t=e.title,a=void 0===t?"Results":t;return(0,o.jsxs)(s.Z,{body:!0,className:"my-4",children:[(0,o.jsx)(s.Z.Title,{children:a}),r.map((function(e,t){return(0,o.jsxs)(i.Z,{className:Boolean(n)&&t===r.length-1?"mb-4":null,children:[(0,o.jsx)(l.Z,{xs:2,children:(0,o.jsx)("strong",{children:e.label})}),(0,o.jsx)(l.Z,{xs:10,children:e.content})]},e.label)})),n]})}c.propTypes={children:a().node,results:a().arrayOf(a().shape({label:a().string.isRequired,content:a().oneOfType([a().node,a().string]).isRequired})).isRequired,title:a().string}},48903:function(e,n,r){r.d(n,{AF:function(){return d},Kl:function(){return f},NC:function(){return l},OK:function(){return c},Q:function(){return m},Ut:function(){return o},ZM:function(){return s},bA:function(){return u},j1:function(){return a},lO:function(){return h},w5:function(){return i}});var t=r(71002),a=function(e){if("object"===("undefined"==typeof window?"undefined":(0,t.Z)(window))){var n=e.toString(),r=new Blob(["(".concat(n,")()")]);return new Worker(URL.createObjectURL(r))}},s=[{brand:"3D Solutech",mass:173},{brand:"Amazon Basics",mass:248},{brand:"Amolen",mass:190},{brand:"Atomic Filament",mass:306},{brand:"Colorfabb",mass:236},{brand:"eSun",mass:224},{brand:"Inland",mass:225},{brand:"Hatchbox",mass:225},{brand:"Overture",mass:237},{brand:"PolyMaker",mass:220},{brand:"Prusament",mass:201},{brand:"ProtoPasta",mass:70},{brand:"StrongHero3D",mass:151},{brand:"SunLu",mass:133},{brand:"ZYLtech",mass:179}],i=function(e){return s.find((function(n){return n.brand===e}))},l=[{name:"PLA",density:1.24},{name:"ABS",density:1.04},{name:"PETG",density:1.27},{name:"Nylon",density:1.52},{name:"TPU",density:1.21},{name:"PC",density:1.3},{name:"CF",density:1.3},{name:"HIPS",density:1.03},{name:"PVA",density:1.23},{name:"ASA",density:1.05},{name:"PP",density:.9},{name:"POM",density:1.4},{name:"PMMA",density:1.18}],o=function(e){return l.find((function(n){return n.name===e}))},c=[{name:"Mk8",diameter:2.4,length:13},{name:"Mk10",diameter:4,length:13},{name:"Volcano 1.75mm",diameter:2,length:21},{name:"Volcano 3mm",diameter:3.2,length:21}],d=function(e){return c.find((function(n){return n.name===e}))},u=[{name:"Ender 3",meltZoneDiameter:2,meltZoneLength:25},{name:"Volcano",meltZoneDiameter:6,meltZoneLength:19}],m=function(e){return u.find((function(n){return n.name===e}))},f=[1.8,.9,7.5],h=[1.25,1,12,16,25,1.41111,1.27,1.5875]},88375:function(e,n,r){var t=r(94184),a=r.n(t),s=r(67294),i=r(14289),l=r(78146),o=r(23735),c=r(76792),d=r(41068),u=r(41485),m=r(39602),f=r(44680),h=r(85893);const x=(0,m.Z)("h4");x.displayName="DivStyledAsH4";const b=(0,f.Z)("alert-heading",{Component:x}),p=(0,f.Z)("alert-link",{Component:o.Z}),g={variant:"primary",show:!0,transition:d.Z,closeLabel:"Close alert"},y=s.forwardRef(((e,n)=>{const{bsPrefix:r,show:t,closeLabel:s,closeVariant:o,className:m,children:f,variant:x,onClose:b,dismissible:p,transition:g,...y}=(0,i.Ch)(e,{show:"onClose"}),v=(0,c.vE)(r,"alert"),j=(0,l.Z)((e=>{b&&b(!1,e)})),Z=!0===g?d.Z:g,C=(0,h.jsxs)("div",{role:"alert",...Z?void 0:y,ref:n,className:a()(m,v,x&&`${v}-${x}`,p&&`${v}-dismissible`),children:[p&&(0,h.jsx)(u.Z,{onClick:j,"aria-label":s,variant:o}),f]});return Z?(0,h.jsx)(Z,{unmountOnExit:!0,...y,ref:void 0,in:t,children:C}):t?C:null}));y.displayName="Alert",y.defaultProps=g,n.Z=Object.assign(y,{Link:p,Heading:b})},86025:function(e,n,r){r.d(n,{Z:function(){return P}});var t=r(94184),a=r.n(t),s=r(67294),i=r(76792),l=r(44680),o=r(39602),c=r(85893);const d=s.forwardRef((({bsPrefix:e,className:n,variant:r,as:t="img",...s},l)=>{const o=(0,i.vE)(e,"card-img");return(0,c.jsx)(t,{ref:l,className:a()(r?`${o}-${r}`:o,n),...s})}));d.displayName="CardImg";var u=d,m=r(49059);const f=s.forwardRef((({bsPrefix:e,className:n,as:r="div",...t},l)=>{const o=(0,i.vE)(e,"card-header"),d=(0,s.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,c.jsx)(m.Z.Provider,{value:d,children:(0,c.jsx)(r,{ref:l,...t,className:a()(n,o)})})}));f.displayName="CardHeader";var h=f;const x=(0,o.Z)("h5"),b=(0,o.Z)("h6"),p=(0,l.Z)("card-body"),g=(0,l.Z)("card-title",{Component:x}),y=(0,l.Z)("card-subtitle",{Component:b}),v=(0,l.Z)("card-link",{Component:"a"}),j=(0,l.Z)("card-text",{Component:"p"}),Z=(0,l.Z)("card-footer"),C=(0,l.Z)("card-img-overlay"),w=s.forwardRef((({bsPrefix:e,className:n,bg:r,text:t,border:s,body:l,children:o,as:d="div",...u},m)=>{const f=(0,i.vE)(e,"card");return(0,c.jsx)(d,{ref:m,...u,className:a()(n,f,r&&`bg-${r}`,t&&`text-${t}`,s&&`border-${s}`),children:l?(0,c.jsx)(p,{children:o}):o})}));w.displayName="Card",w.defaultProps={body:!1};var P=Object.assign(w,{Img:u,Title:g,Subtitle:y,Body:p,Link:v,Text:j,Header:h,Footer:Z,ImgOverlay:C})},98152:function(e,n,r){function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,s=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(t=r.next()).done)&&(s.push(t.value),!n||s.length!==n);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(n,{Z:function(){return a}})}}]);
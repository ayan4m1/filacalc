"use strict";(self.webpackChunkfilacalc=self.webpackChunkfilacalc||[]).push([[15],{9304:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var r=t(3863),a=t(8779),i=t(2902),s=t(1436),o=t(7625),l=t(8485),c=t(5823),d=t.n(c),u=t(7294),h=t(4809),m=t(4051),f=t(1555),p=t(9267),x=t(3489),j=t(2086),b=t(5005),g=t(5147),y=t(7977),v=t(1479),Z=t(4593),C=t(4586),S=t(9501),k=t(2394),w=t(5697),N=t.n(w),F=t(4210),D=t(9198),W=t.n(D),L=t(1881),P=t(3314),M=t(8903),A=t(5893);function O(e){var n=e.form,t=n.errors,a=n.values,s=n.handleChange,o=n.handleSubmit,l=n.setFieldValue,c=e.onHide,d=(0,u.useCallback)((function(e){return l("purchaseDate",(0,r.Z)(e))}),[l]),h=(0,u.useCallback)((function(e){return l("color",e.hex)}),[l]);return(0,A.jsx)(L.Z,{dialogClassName:"modal-90w",onHide:c,show:!0,children:(0,A.jsxs)(P.Z,{onSubmit:o,children:[(0,A.jsx)(L.Z.Header,{closeButton:!0,children:(0,A.jsxs)(L.Z.Title,{children:[a?"Edit":"Create"," a Spool"]})}),(0,A.jsxs)(L.Z.Body,{children:[(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Spool Name"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.name),name:"name",onChange:s,type:"text",value:a.name}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.name})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Filament Material"}),(0,A.jsxs)(P.Z.Select,{isInvalid:Boolean(t.material),name:"material",onChange:s,value:a.material,children:[M.NC.map((function(e){return(0,A.jsx)("option",{value:e.name,children:e.name},e.name)})),(0,A.jsx)("option",{value:"custom",children:"Custom"})]}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.material})]}),"custom"===a.material&&(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsxs)(P.Z.Label,{children:["Material Density (g/cm",(0,A.jsx)("sup",{children:"3"}),")"]}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.materialDensity),name:"materialDensity",onChange:s,type:"number",value:a.materialDensity}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.materialDensity})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Color"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.color),name:"color",onChange:s,type:"text",value:a.color}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.color}),(0,A.jsx)(F.xS,{className:"my-2",color:a.color,onChange:h})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Net Weight (g)"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.netWeight),min:"0",name:"netWeight",onChange:s,type:"number",value:a.netWeight}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.netWeight})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Spool Weight (g)"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.spoolWeight),min:"0",name:"spoolWeight",onChange:s,type:"number",value:a.spoolWeight}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.spoolWeight})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Current Weight (g)"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.currentWeight),min:"0",name:"currentWeight",onChange:s,step:"0.01",type:"number",value:a.currentWeight}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.currentWeight}),(0,A.jsxs)(P.Z.Text,{className:"text-primary",children:[((a.currentWeight-a.spoolWeight)/a.netWeight*100).toFixed(2),"% remaining"]})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Filameter Diameter (mm)"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.filamentDiameter),min:"0",name:"filamentDiameter",onChange:s,step:"0.01",type:"number",value:a.filamentDiameter}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.filamentDiameter})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Purchase Date"}),(0,A.jsx)(P.Z.Control,{as:W(),isInvalid:Boolean(t.purchaseDate),onChange:d,selected:(0,i.default)(a.purchaseDate)}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.purchaseDate})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Purchase Cost"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(t.purchaseCost),min:"0",name:"purchaseCost",onChange:s,step:"0.01",type:"number",value:a.purchaseCost}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:t.purchaseCost})]})]}),(0,A.jsxs)(L.Z.Footer,{children:[(0,A.jsx)(b.Z,{onClick:c,variant:"secondary",children:"Cancel"}),(0,A.jsx)(b.Z,{type:"submit",variant:"primary",children:"Save"})]})]})})}O.propTypes={form:N().shape({errors:N().object.isRequired,values:N().object.isRequired,setFieldValue:N().func.isRequired,handleChange:N().func.isRequired,handleSubmit:N().func.isRequired}).isRequired,onHide:N().func.isRequired};var R=t(682),T=t(6968),I=t(8375),G=t(256),q=S.Ry({filamentLength:S.Rx().moreThan(0,"Filament length must be greater than zero."),copies:S.Rx().moreThan(0,"Copies must be greater than zero.")});function B(e){var n=e.spool,t=e.onHide,r=e.onSubmit,a=(0,l.TA)({initialValues:{filamentLength:0,copies:1},validationSchema:q,onSubmit:(0,u.useCallback)((function(e){var t=0,a=e.filamentLength*e.copies,i=Math.PI*Math.pow(n.filamentDiameter/2,2)*a;t="custom"!==n.material?i*(0,M.Ut)(n.material).density:i*n.materialDensity,r(t)}),[r,n])}),i=a.errors,s=a.values,o=a.handleChange,c=a.handleSubmit,d=a.setFieldValue,h=(0,G.Z)((function(e){return d("filamentLength",e.length.toFixed(2))})),p=h.loading,x=h.error,j=h.progress,g=h.handleChange;if(p)return(0,A.jsxs)(L.Z,{onHide:t,show:!0,children:[(0,A.jsx)(L.Z.Header,{children:(0,A.jsx)(L.Z.Title,{children:"Parsing your G-code..."})}),(0,A.jsx)(L.Z.Body,{children:(0,A.jsx)(R.Z,{children:(0,A.jsx)(m.Z,{children:(0,A.jsxs)(f.Z,{className:"text-center mb-4",children:[(0,A.jsx)(T.Z,{animation:"border",className:"my-3"}),(0,A.jsx)(v.Z,{animated:!0,now:j,variant:"primary"})]})})})})]});var y=s.filamentLength*s.copies,Z="custom"===n.material?n.materialDensity:(0,M.Ut)(n.material).density,C=Math.PI*Math.pow(n.filamentDiameter/2,2)*y*Z,S=(0,M.Hk)(n).length,k=S-y,w=k/S*100,N=C/n.netWeight*n.purchaseCost;return(0,A.jsx)(L.Z,{onHide:t,show:!0,children:(0,A.jsxs)(P.Z,{children:[(0,A.jsx)(L.Z.Header,{closeButton:!0,children:(0,A.jsxs)(L.Z.Title,{children:["Print from ",null==n?void 0:n.name]})}),(0,A.jsxs)(L.Z.Body,{children:[(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Select a G-code file"}),(0,A.jsx)(P.Z.Control,{isInvalid:x,onChange:g,type:"file"}),(0,A.jsx)(P.Z.Text,{className:"text-muted",children:"Files are parsed in your browser, not sent to a server."}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:"Unable to parse the selected file."})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Filament Length (m)"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(i.filamentLength),min:"0",name:"filamentLength",onChange:o,type:"number",value:s.filamentLength}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:i.filamentLength})]}),(0,A.jsxs)(P.Z.Group,{children:[(0,A.jsx)(P.Z.Label,{children:"Number of Copies"}),(0,A.jsx)(P.Z.Control,{isInvalid:Boolean(i.copies),min:"1",name:"copies",onChange:o,type:"number",value:s.copies}),(0,A.jsx)(P.Z.Control.Feedback,{type:"invalid",children:i.filamentLength})]}),k>0?(0,A.jsxs)(I.Z,{className:"mt-2",variant:"info",children:[(0,A.jsxs)("p",{children:["This print will consume ",y.toFixed(2)," ","meters of filament, leaving this much of the spool:"]}),(0,A.jsx)(v.Z,{label:"".concat(Math.round(w),"%"),now:w}),(0,A.jsxs)("p",{children:["The cost of the filament is ",N.toFixed(2),"."]})]}):(0,A.jsx)(I.Z,{className:"mt-2",variant:"danger",children:"The spool does not have enough filament remaining for this print!"})]}),(0,A.jsxs)(L.Z.Footer,{children:[(0,A.jsx)(b.Z,{onClick:t,variant:"secondary",children:"Cancel"}),(0,A.jsx)(b.Z,{disabled:k<=0,onClick:c,variant:"primary",children:"Print"})]})]})})}function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,i=[],s=!0,o=!1;try{for(t=t.call(e);!(s=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return H(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){U(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function U(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}B.propTypes={onHide:N().func.isRequired,onSubmit:N().func.isRequired,spool:N().object.isRequired};var K=(0,u.forwardRef)((function(e,n){return(0,A.jsx)(o.G,V({forwardedRef:n},e))}));K.displayName="Icon";var $=S.Ry({name:S.Z_().required("Name must be provided."),material:S.Z_().required("Material must be provided."),materialDensity:S.Rx().moreThan(0,"Density must be greater than zero."),color:S.Z_().required("Color must be provided.").matches(/#[a-fA-F0-9]+/,"Color is invalid."),netWeight:S.Rx().required("Net weight must be provided.").moreThan(0,"Net weight must be greater than zero."),spoolWeight:S.Rx().required("Spool weight must be provided.").moreThan(0,"Spool weight must be greater than zero."),currentWeight:S.Rx().required("Current weight must be provided.").moreThan(0,"Current weight must be greater than zero."),filamentDiameter:S.Rx().required("Filament diameter must be provided.").moreThan(0,"Filament diameter must be greater than zero."),purchaseDate:S.Z_().required("Purchase date must be provided."),purchaseCost:S.Rx().required("Purchase cost must be provided.")});function _(){var e={name:"Spool",material:"PLA",materialDensity:1.24,color:"#000000",netWeight:1e3,spoolWeight:250,currentWeight:1250,filamentDiameter:(0,k.K)().filamentDiameter,purchaseDate:(0,r.Z)(new Date),purchaseCost:0},n=(0,u.useRef)(),t=E((0,u.useState)(null),2),c=t[0],S=t[1],w=E((0,u.useState)(!1),2),N=w[0],F=w[1],D=E((0,u.useState)(!1),2),W=D[0],L=D[1],P=E((0,u.useState)(0),2),R=P[0],T=P[1],I=E((0,u.useState)(0),2),G=I[0],q=I[1],H=(0,k.K)(),z=H.spools,U=H.findSpool,_=H.addSpool,J=H.updateSpool,Q=H.removeSpool,Y=H.setSpools,X=(0,l.TA)({initialValues:e,validationSchema:$,onSubmit:function(e){c?J(V({id:c},e)):_(V({id:(0,C.Z)()},e)),F(!1)}}),ee=X.handleReset,ne=X.setFieldValue,te=(0,u.useCallback)((function(){ee(),F(!0),S(null)}),[F,S,ee]),re=(0,u.useCallback)((function(){if(c){var e=U(c);for(var n in e)Object.hasOwn(e,n)&&ne(n,e[n]);F(!0)}}),[F,ne,U,c]),ae=(0,u.useCallback)((function(){c&&confirm("Are you sure you want to delete this spool?")&&Q(c)}),[Q,c]),ie=(0,u.useCallback)((function(){_(V(V({},U(c)),{},{id:(0,C.Z)()}))}),[_,U,c]),se=(0,u.useCallback)((function(){c&&L(!0)}),[c,L]),oe=(0,u.useCallback)((function(e){if(c){var n=U(c),t=Math.round(100*(n.currentWeight-e))/100;J(V(V({},n),{},{currentWeight:t})),L(!1)}}),[U,J,c]),le=(0,u.useCallback)((function(){n.current&&n.current.click()}),[n]),ce=(0,u.useCallback)((function(e){var n=E(e.target.files,1)[0],t=new FileReader;t.onloadend=function(e){var n=e.target.result,t=JSON.parse(n);t&&alert("Are you sure you want to overwrite your current spool database?")&&(S(null),Y(t))},t.readAsText(n)}),[S,Y]),de=(0,u.useCallback)((function(){return d()(JSON.stringify(z),"filacalc-export-".concat((0,a.default)(Date.now(),"yyyy-MM-dd"),".json"))}),[z]),ue=(0,u.useCallback)((function(){confirm("Are you sure you want to cancel?")&&F(!1)}),[F]),he=(0,u.useCallback)((function(){return L(!1)}),[L]),me=(0,u.useCallback)((function(e){return S((function(n){return n===e?null:e}))}),[S]);return(0,u.useEffect)((function(){T(z.reduce((function(e,n){return e+n.netWeight}),0)),q(z.reduce((function(e,n){return e+(n.currentWeight-n.spoolWeight)}),0))}),[T,q,z]),(0,A.jsxs)(u.Fragment,{children:[(0,A.jsx)(Z.q,{title:"Spool Database"}),N&&(0,A.jsx)(O,{form:X,onHide:ue,show:N}),c&&W&&(0,A.jsx)(B,{onHide:he,onSubmit:oe,spool:U(c)}),(0,A.jsxs)(m.Z,{className:"mb-2",children:[(0,A.jsx)(f.Z,{md:9,children:(0,A.jsxs)("div",{className:"d-flex align-items-center",children:[(0,A.jsx)("h1",{className:"me-2",children:"Spool Database"}),(0,A.jsx)(p.Z,{overlay:(0,A.jsx)(x.Z,{children:"All data is saved to your browser's local storage."}),placement:"right",children:(0,A.jsx)(K,{icon:s.Fuz})})]})}),(0,A.jsxs)(f.Z,{className:"d-flex justify-content-end align-items-end",md:3,children:[(0,A.jsx)("input",{className:"d-none",onChange:ce,ref:n,type:"file"}),(0,A.jsxs)(j.Z,{children:[(0,A.jsxs)(b.Z,{onClick:le,children:[(0,A.jsx)(o.G,{icon:s.cf$})," Import"]}),(0,A.jsxs)(b.Z,{onClick:de,children:[(0,A.jsx)(o.G,{icon:s.q7m})," Export"]})]})]})]}),(0,A.jsxs)("div",{className:"d-flex mb-2",children:[(0,A.jsxs)(j.Z,{children:[(0,A.jsxs)(b.Z,{onClick:te,variant:"success",children:[(0,A.jsx)(o.G,{icon:s.KtF})," Add"]}),(0,A.jsxs)(b.Z,{disabled:!c,onClick:re,children:[(0,A.jsx)(o.G,{icon:s.TzT})," Edit"]}),(0,A.jsxs)(b.Z,{disabled:!c,onClick:ie,children:[(0,A.jsx)(o.G,{icon:s.WM4})," Clone"]}),(0,A.jsxs)(b.Z,{disabled:!c,onClick:ae,variant:"danger",children:[(0,A.jsx)(o.G,{icon:s.$aW})," Remove"]})]}),(0,A.jsx)(j.Z,{className:"ms-auto",children:(0,A.jsxs)(b.Z,{disabled:!c,onClick:se,children:[(0,A.jsx)(o.G,{icon:s.wf8})," Print"]})})]}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)("thead",{children:[(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{colSpan:5}),(0,A.jsx)("th",{className:"text-center",colSpan:3,children:"Remaining"})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{width:"30%"},children:"Name"}),(0,A.jsx)("th",{children:"Material"}),(0,A.jsx)("th",{className:"text-center",children:"Purchased"}),(0,A.jsx)("th",{className:"text-end",children:"Net Weight"}),(0,A.jsx)("th",{className:"text-end",children:"Cost / kg"}),(0,A.jsx)("th",{className:"text-end",style:{width:"20%"},children:"%"}),(0,A.jsx)("th",{className:"text-end",children:"Mass"}),(0,A.jsx)("th",{className:"text-end",children:"Length"})]})]}),(0,A.jsxs)("tbody",{children:[!(null!=z&&z.length)&&(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:7,children:"No spools."})}),z.map((function(e){var n=(0,M.Hk)(e),t=n.mass,r=n.length,s=c===e.id?"bg-dark text-light":"",o=(0,a.default)((0,i.default)(e.purchaseDate),"yyyy-MM-dd"),l="custom"===e.material?"Custom":e.material;return(0,A.jsxs)("tr",{className:s,onClick:function(){return me(e.id)},children:[(0,A.jsx)("td",{children:(0,A.jsx)(y.Z,{bg:"",style:{color:(0,h.Qg)(e.color),backgroundColor:e.color},children:e.name})}),(0,A.jsx)("td",{children:l}),(0,A.jsx)("td",{className:"text-center",children:o}),(0,A.jsxs)("td",{className:"text-end",children:[e.netWeight," g"]}),(0,A.jsx)("td",{className:"text-end",children:Boolean(e.purchaseCost)&&(e.purchaseCost/e.netWeight*1e3).toFixed(2)}),(0,A.jsx)("td",{className:"text-end",children:(0,A.jsx)(v.Z,{className:"text-light",label:"".concat(Math.floor(t/e.netWeight*100),"%"),now:t/e.netWeight*100})}),(0,A.jsxs)("td",{className:"text-end",children:[t.toFixed(2)," g"]}),(0,A.jsxs)("td",{className:"text-end",children:[r.toFixed(2)," m"]})]},e.id)}))]}),(0,A.jsx)("tfoot",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Totals"}),(0,A.jsxs)("td",{className:"text-end",colSpan:3,children:[Math.round(R)," g"]}),(0,A.jsxs)("td",{className:"text-end",colSpan:3,children:[Math.round(G)," g"]}),(0,A.jsx)("td",{})]})})]})]})}},256:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(7294),a=()=>{const e=e=>{for(const[,,,n,t]of[...e.trim().matchAll(/(\s*(([XYZFEIJR])([0-9\-.]+))\s*)/g)])if("E"===n)return parseFloat(t);return 0};self.addEventListener("message",(({data:n})=>{const t=new FileReader;let r=0,a=0;t.addEventListener("load",(n=>{const t=n.target.result.split(/[\n]/g).filter((e=>/^G[1-3]/.test(e)));for(const[n,i]of t.entries()){r+=e(i);const s=Math.round(n/t.length*100);s!==a&&(postMessage({type:"progress",progress:s}),a=s)}r>0&&postMessage({type:"result",length:r/1e3})})),t.addEventListener("error",(e=>{postMessage({type:"error",error:e})})),t.readAsText(n)}))},i=t(8903);function s(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,i=[],s=!0,o=!1;try{for(t=t.call(e);!(s=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function l(e){var n=(0,r.useMemo)((function(){return(0,i.j1)(a)}),[]),t=s((0,r.useState)(!1),2),o=t[0],l=t[1],c=s((0,r.useState)(!1),2),d=c[0],u=c[1],h=s((0,r.useState)(0),2),m=h[0],f=h[1],p=(0,r.useCallback)((function(n){var t=n.data;switch(t.type){case"progress":f(t.progress);break;case"result":e(t),u(!1),f(100);break;case"error":l(!0),u(!1)}}),[e,f,u,l]),x=(0,r.useCallback)((function(e){var t=s(e.target.files,1)[0];if(!t||!t.name.endsWith(".gcode"))return l(!0),void u(!1);l(!1),u(!0),f(0),n.postMessage(t)}),[n]);return(0,r.useEffect)((function(){return n.addEventListener("message",p),function(){return n.removeEventListener("message",p)}})),{loading:d,error:o,progress:m,handleChange:x}}},8903:function(e,n,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.d(n,{AF:function(){return d},Hk:function(){return p},Kl:function(){return m},NC:function(){return o},OK:function(){return c},Q:function(){return h},Ut:function(){return l},ZM:function(){return i},bA:function(){return u},j1:function(){return a},lO:function(){return f},w5:function(){return s}});var a=function(e){if("object"===("undefined"==typeof window?"undefined":r(window))){var n=e.toString(),t=new Blob(["(".concat(n,")()")]);return new Worker(URL.createObjectURL(t))}},i=[{brand:"3D Solutech",mass:173},{brand:"Amazon Basics",mass:248},{brand:"Amolen",mass:190},{brand:"Atomic Filament",mass:306},{brand:"Colorfabb",mass:236},{brand:"eSun",mass:224},{brand:"Inland",mass:225},{brand:"Hatchbox",mass:225},{brand:"Overture - Plastic",mass:237},{brand:"Overture - Cardboard",mass:177},{brand:"PolyMaker",mass:220},{brand:"Prusament",mass:201},{brand:"ProtoPasta",mass:70},{brand:"StrongHero3D",mass:151},{brand:"SunLu",mass:133},{brand:"ZYLtech",mass:179}],s=function(e){return i.find((function(n){return n.brand===e}))},o=[{name:"PLA",density:1.24},{name:"ABS",density:1.04},{name:"PETG",density:1.27},{name:"Nylon",density:1.52},{name:"TPU",density:1.21},{name:"PC",density:1.3},{name:"CF",density:1.3},{name:"HIPS",density:1.03},{name:"PVA",density:1.23},{name:"ASA",density:1.05},{name:"PP",density:.9},{name:"POM",density:1.4},{name:"PMMA",density:1.18}],l=function(e){return o.find((function(n){return n.name===e}))},c=[{name:"Mk8",diameter:2.4,length:13},{name:"Mk10",diameter:4,length:13},{name:"Volcano 1.75mm",diameter:2,length:21},{name:"Volcano 3mm",diameter:3.2,length:21}],d=function(e){return c.find((function(n){return n.name===e}))},u=[{name:"Ender 3",meltZoneDiameter:2,meltZoneLength:25},{name:"Volcano",meltZoneDiameter:6,meltZoneLength:19}],h=function(e){return u.find((function(n){return n.name===e}))},m=[1.8,.9,7.5],f=[1.25,1,12,16,25,1.41111,1.27,1.5875],p=function(e){var n=0,t=e.currentWeight-e.spoolWeight;return{mass:t,volume:n="custom"!==e.material?t/l(e.material).density:t/e.materialDensity,length:n/Math.PI/Math.pow(e.filamentDiameter/2,2),percent:t/e.netWeight*100}}}}]);